@model GPSystem.Models.GroupMemberView
@{
    ViewBag.Title = "Index";
}

<h3>Add members</h3>
<p>to this group  : <strong>@ViewBag.GroupName</strong></p>

<div class="row">
    <div class="col-md-7">
        <h4>Members</h4>
        <table class="table table-responsive table-striped">
            <tr>
                <th>Name</th>
                <th>Surname</th>
                <th>Gender</th>
                <th class="text-center">Actions</th>
            </tr>
            @if(Model != null)
            {
                foreach (var item in Model.Members)
                {
                    <tr>
                        <td>@item.Name</td>
                        <td>@item.Surname</td>
                        <td>@item.Gender</td>
                        <td class="text-center">
                            <input type="button" onclick="View('@item.Id')" value="View details" class="btn btn-sm btn-info" /> | 
                            <button id="btnAdd" class="btn btn-sm btn-success" onclick="Add('@item.Id');">Add to group <span class="glyphicon glyphicon-plus-sign"></span></button>
                            <button id="btnAdd" class="btn btn-sm btn-success" onclick="Add('@item.Id');">Remove <span class="glyphicon glyphicon-plus-sign"></span></button>
                        </td>
                    </tr>
                }
            }
        </table>
    </div>
    <div class="col-md-4 col-md-offset-1">
        <h4>Details</h4>
        <table class="table">
            <tr>
                <th>Name</th>
                <td>@Model.Group.Name</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>@Model.Group.Description</td>
            </tr>
            <tr>
                <th>Date Created</th>
                <td>@Model.Group.DateCreated.ToString("D")</td>
            </tr>
            <tr>
                <th>Selected Members</th>
                <td><span id="memberNumber"></span></td>
            </tr>
        </table>
    </div>
</div>
<div align="center">
    <button class="btn btn-sm btn-default" onclick="reset()"><span class="glyphicon glyphicon-refresh"></span> Reset </button> |
    <button class="btn btn-sm btn-success"><span class="glyphicon glyphicon-floppy-disk"></span> Save </button> 
</div>



@* 
    Thee poison
*@
<script type="text/javascript">

    var members = Array();

    $("button#btnAdd").click(function () {
        $(this).addClass("disabled");
        
    });

    function Add(Id) {
        //alert(Id);
        members[members.length] = Id;
        document.getElementById("memberNumber").innerHTML = members.length;
        //var i = 0;
        //while(i<members.length){
        //    alert(members[i]);
        //    i++;
        //}
        var url = "/GroupMember/AddMember"
        $.post(url, { groupId:@Model.Group.Id, MemberId: Id }, function (data) {
            if(data){
                
            }
        });
    }

    function reset(){
        location.reload();
    }

</script>