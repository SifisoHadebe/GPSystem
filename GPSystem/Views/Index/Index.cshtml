@model GPSystem.Models.IndexModelView
@{
    ViewBag.Title = "Index";
}

@* Main *@
<div class="col-md-12 text-center">
    <div class="col-md-9 text-left" style="padding: 0px;">

        <div class="panel panel-default">
            <div class="panel-heading">
                <img src="~/imgRepo/News.png" style="width: 120px;" class="img-responsive center-block" />
                <h4 class="text-center">News</h4>
            </div>
            <div class="panel-body">
                <p>2222</p>

                <p style="padding-left: 5px;">@Html.ActionLink("More News", "Index", "Member")</p>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <img src="~/imgRepo/user.png" class="img-responsive img-circle center-block" />
                <h4 class="text-center">New Members<span style="color: #808080; font-size:x-small; padding-left: 8px;">@ViewBag.Members Member(s) in total</span></h4>
            </div>
            
            <div class="panel-body">
                <table class="table table-responsive">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Email</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model != null)
            {
                foreach (var member in Model.Members)
                {
                                <tr>
                                    <td>@member.Name &nbsp; @member.Surname</td>
                                    <td>@member.UserName</td>
                                </tr>
                            }
                        }
                    </tbody>
                </table>
                <p style="padding-left: 5px;">@Html.ActionLink("More Members", "Index", "Member")</p>
            </div>
        </div>
        <br />
        
        <div class="panel panel-default">
            <div class="panel-heading">
                <img src="~/imgRepo/Calender.png" style="width: 130px;" class="img-responsive img-circle center-block" />
                <h4 class="text-center">Recent Events <span style="color: #808080; font-size:x-small; padding-left: 8px;">@ViewBag.EventCount events in total</span></h4>
            </div>
            <div>
                @if (Model != null)
                {
                    <table class="table table-striped table-responsive">
                        <tr>
                            <th>Event Name</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                        @foreach (var item in Model.Events)
                        {
                            <tr>
                                <td>@item.Name</td>
                                <td>@item.EventDate</td>
                                <td>@Html.ActionLink("Details", "Details", "Event", new { id = item.Id }, new { @class = "btn btn-default btn-sm", @style = "border-radius: 0px;" })</td>
                            </tr>
                        }
                    </table>
                }
                else
                {
                    <p>There are no events created.</p>
                }
                <p style="padding-left: 20px;">@Html.ActionLink("More Events", "Index", "Event")</p>
            </div>
        </div>
        
    </div>

    <div class="col-md-3 right">

        <div class="panel panel-primary">
            <div class="panel-heading" style="">
                <span class="first animated slideInLeft">N</span>otification Panel
            </div>
            <div class="text-left" style="padding: 10px;">
                <p style="border-bottom: 1px solid #ccc;"><strong><span class="glyphicon glyphicon-time first"></span> </strong> <span id="txt" style="padding-left: 10px;"></span></p>
                <p style="border-bottom: 1px solid #ccc;"><strong><span class="glyphicon glyphicon-envelope first"></span> </strong> <span style="padding-left: 10px;">22</span></p>
                <p style="border-bottom: 1px solid #ccc;"><strong><span class="glyphicon glyphicon-comment first"></span> </strong> <span style="padding-left: 10px;">22</span></p>
            </div>
        </div>

        <div class="panel panel-primary">
            <div class="panel-heading" style="">
                <span class="first">M</span>y Church Stat
            </div>
            <div class="text-left" style="padding: 10px;">
                <p><strong>Members : </strong> @ViewBag.Members</p>
                <p><strong>Groups : </strong> 80</p>
                <p><strong>Events : </strong> @ViewBag.EventCount</p>
            </div>
        </div>

    </div>

</div>


<script>
    function startTime() {
        var today = new Date();
        var h = today.getHours();
        var m = today.getMinutes();
        var s = today.getSeconds();
        m = checkTime(m);
        s = checkTime(s);
        document.getElementById('txt').innerHTML =
        "<span style='font-size: 18px; font-weight: bold;'>" + h + "</span>" + ":"
        + "<span style='font-size: 16px; font-weight: bold;'>" + m + "</span>" + ":" + s
        var t = setTimeout(startTime, 500);
    }
    function checkTime(i) {
        if (i < 10) { i = "0" + i }  // add zero in front of numbers < 10
        return i
    }

    startTime()
</script>